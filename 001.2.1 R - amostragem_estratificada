# chamando dados infert
infert
# resumo dos dados
summary(infert)
#calcular proporção do strato da coluna 0-5yrs
# número de elementos dos stratos / pela população ou amostra total * tamanho que quero gerar a amostra
#amostra gerada para 0->5 anos
12 / 248 * 100
#calcular proporção do strato da coluna 6-11yrs
#amostra gerada para 6->11 anos
120 / 248 * 100
#calcular proporção do strato da coluna 12+yrs
#amostra gerada para 12+ anos
116 / 248 * 100
#arredondar resultados para mais ou para menos]
# o método "srswor" é padrão de strata e ele somente quer dizer que foi gerada uma amostra aleatória  sem reposição,
# ou seja, dentro daquele strato definido ele gera uma amostra aleatória sem reposição
# gerar strata
amostra = strata(infert, c("education"), size = c(5, 48, 47), method="srswor")
# exibir resultado
amostra
# sumário da var
summary(amostra)
# a técnica aqui resultou que todos os elementos na sua proporção, na var categóriga "education" 
# tiveram a mesma chance de ser incluídos na amostra
<br/>
<br/>
> infert
    education age parity induced case spontaneous stratum pooled.stratum
1      0-5yrs  26      6       1    1           2       1              3
2      0-5yrs  42      1       1    1           0       2              1
3      0-5yrs  39      6       2    1           0       3              4
4      0-5yrs  34      4       2    1           0       4              2
5     6-11yrs  35      3       1    1           1       5             32
6     6-11yrs  36      4       2    1           1       6             36
7     6-11yrs  23      1       0    1           0       7              6
8     6-11yrs  32      2       0    1           0       8             22
9     6-11yrs  21      1       0    1           1       9              5
10    6-11yrs  28      2       0    1           0      10             19
11    6-11yrs  29      2       1    1           0      11             20
12    6-11yrs  37      4       2    1           1      12             37
13    6-11yrs  31      1       1    1           0      13              9
14    6-11yrs  29      3       2    1           0      14             29
15    6-11yrs  31      2       1    1           1      15             21
16    6-11yrs  27      2       2    1           0      16             18
17    6-11yrs  30      5       2    1           1      17             38
18    6-11yrs  26      1       0    1           1      18              7
19    6-11yrs  25      3       2    1           1      19             28
20    6-11yrs  44      1       0    1           1      20             17
21    6-11yrs  40      1       0    1           1      21             14
22    6-11yrs  35      2       2    1           0      22             24
23    6-11yrs  28      2       0    1           2      23             19
24    6-11yrs  36      1       0    1           1      24             12
25    6-11yrs  27      2       1    1           1      25             18
26    6-11yrs  40      2       0    1           2      26             27
27    6-11yrs  38      2       0    1           2      27             26
28    6-11yrs  34      3       0    1           2      28             31
29    6-11yrs  28      4       1    1           2      29             34
30    6-11yrs  30      4       2    1           0      30             35
31    6-11yrs  32      1       0    1           1      31             10
32    6-11yrs  34      2       1    1           0      32             23
33    6-11yrs  42      1       1    1           0      33             16
34    6-11yrs  32      2       0    1           2      34             22
35    6-11yrs  39      1       1    1           0      35             13
36    6-11yrs  35      2       0    1           2      36             24
37    6-11yrs  36      1       0    1           1      37             12
38    6-11yrs  34      3       1    1           2      38             31
39    6-11yrs  30      3       0    1           0      39             30
40    6-11yrs  28      1       0    1           1      40              8
41    6-11yrs  39      3       0    1           2      41             33
42    6-11yrs  35      1       0    1           0      42             11
43    6-11yrs  41      1       0    1           0      43             15
44    6-11yrs  37      2       1    1           1      44             25
45    12+ yrs  30      1       0    1           0      45             44
46    12+ yrs  37      1       1    1           0      46             48
47    12+ yrs  28      2       0    1           2      47             51
48    12+ yrs  27      4       2    1           0      48             61
49    12+ yrs  26      2       2    1           0      49             49
50    12+ yrs  38      3       0    1           2      50             60
51    12+ yrs  24      3       1    1           2      51             56
52    12+ yrs  36      5       1    1           2      52             62
53    12+ yrs  27      3       1    1           1      53             57
54    12+ yrs  28      1       0    1           1      54             42
55    12+ yrs  29      2       0    1           2      55             52
56    12+ yrs  36      2       0    1           2      56             55
57    12+ yrs  28      2       1    1           0      57             51
58    12+ yrs  28      2       0    1           2      58             51
59    12+ yrs  28      1       0    1           1      59             42
60    12+ yrs  27      2       0    1           2      60             50
61    12+ yrs  35      2       0    1           2      61             54
62    12+ yrs  25      1       0    1           1      62             41
63    12+ yrs  34      1       0    1           1      63             47
64    12+ yrs  31      2       0    1           2      64             53
65    12+ yrs  26      2       1    1           0      65             49
66    12+ yrs  32      1       0    1           1      66             46
67    12+ yrs  21      1       0    1           1      67             39
68    12+ yrs  28      3       1    1           2      68             58
69    12+ yrs  37      3       0    1           2      69             59
70    12+ yrs  25      1       1    1           0      70             41
71    12+ yrs  32      1       1    1           0      71             46
72    12+ yrs  25      1       0    1           1      72             41
73    12+ yrs  31      1       0    1           1      73             45
74    12+ yrs  38      6       0    1           2      74             63
75    12+ yrs  26      2       0    1           2      75             49
76    12+ yrs  31      1       0    1           1      76             45
77    12+ yrs  31      2       0    1           1      77             53
78    12+ yrs  25      1       1    1           0      78             41
79    12+ yrs  31      1       0    1           1      79             45
80    12+ yrs  34      1       0    1           1      80             47
81    12+ yrs  35      2       2    1           0      81             54
82    12+ yrs  29      1       0    1           1      82             43
83    12+ yrs  23      1       0    1           1      83             40
84     0-5yrs  26      6       2    0           0       1              3
85     0-5yrs  42      1       0    0           0       2              1
86     0-5yrs  39      6       2    0           0       3              4
87     0-5yrs  34      4       0    0           1       4              2
88    6-11yrs  35      3       2    0           0       5             32
89    6-11yrs  36      4       1    0           1       6             36
90    6-11yrs  23      1       0    0           0       7              6
91    6-11yrs  32      2       2    0           0       8             22
92    6-11yrs  21      1       0    0           1       9              5
93    6-11yrs  28      2       0    0           1      10             19
94    6-11yrs  29      2       0    0           0      11             20
95    6-11yrs  37      4       1    0           1      12             37
96    6-11yrs  31      1       0    0           0      13              9
97    6-11yrs  29      3       0    0           1      14             29
98    6-11yrs  31      2       1    0           0      15             21
99    6-11yrs  27      2       1    0           0      16             18
100   6-11yrs  30      5       0    0           2      17             38
101   6-11yrs  26      1       0    0           0      18              7
102   6-11yrs  25      3       0    0           1      19             28
103   6-11yrs  44      1       0    0           0      20             17
104   6-11yrs  40      1       0    0           0      21             14
105   6-11yrs  35      2       0    0           0      22             24
106   6-11yrs  28      2       0    0           0      23             19
107   6-11yrs  36      1       0    0           0      24             12
108   6-11yrs  27      2       0    0           1      25             18
109   6-11yrs  40      2       0    0           0      26             27
110   6-11yrs  38      2       0    0           0      27             26
111   6-11yrs  34      3       0    0           0      28             31
112   6-11yrs  28      4       0    0           2      29             34
113   6-11yrs  30      4       1    0           1      30             35
114   6-11yrs  32      1       0    0           0      31             10
115   6-11yrs  34      2       1    0           0      32             23
116   6-11yrs  42      1       1    0           0      33             16
117   6-11yrs  32      2       0    0           0      34             22
118   6-11yrs  39      1       0    0           0      35             13
119   6-11yrs  35      2       0    0           0      36             24
120   6-11yrs  36      1       0    0           0      37             12
121   6-11yrs  34      3       2    0           0      38             31
122   6-11yrs  30      3       0    0           2      39             30
123   6-11yrs  28      1       1    0           0      40              8
124   6-11yrs  39      3       1    0           0      41             33
125   6-11yrs  35      1       0    0           0      42             11
 [ reached 'max' / getOption("max.print") -- omitted 123 rows ]
> summary(infert)
   education        age            parity         induced            case         spontaneous        stratum     
 0-5yrs : 12   Min.   :21.00   Min.   :1.000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   : 1.00  
 6-11yrs:120   1st Qu.:28.00   1st Qu.:1.000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:21.00  
 12+ yrs:116   Median :31.00   Median :2.000   Median :0.0000   Median :0.0000   Median :0.0000   Median :42.00  
               Mean   :31.50   Mean   :2.093   Mean   :0.5726   Mean   :0.3347   Mean   :0.5766   Mean   :41.87  
               3rd Qu.:35.25   3rd Qu.:3.000   3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:62.25  
               Max.   :44.00   Max.   :6.000   Max.   :2.0000   Max.   :1.0000   Max.   :2.0000   Max.   :83.00  
 pooled.stratum 
 Min.   : 1.00  
 1st Qu.:19.00  
 Median :36.00  
 Mean   :33.58  
 3rd Qu.:48.25  
 Max.   :63.00  
> 12 /248 * 100
[1] 4.83871
> 120 / 248 * 100
[1] 48.3871
> 116 / 248 * 100
[1] 46.77419
> amostra = strata(infert, c("education"), size = c(5, 48, 47), method="srswor")
> amostra
    education ID_unit      Prob Stratum
2      0-5yrs       2 0.4166667       1
87     0-5yrs      87 0.4166667       1
167    0-5yrs     167 0.4166667       1
168    0-5yrs     168 0.4166667       1
169    0-5yrs     169 0.4166667       1
9     6-11yrs       9 0.4000000       2
11    6-11yrs      11 0.4000000       2
12    6-11yrs      12 0.4000000       2
14    6-11yrs      14 0.4000000       2
16    6-11yrs      16 0.4000000       2
18    6-11yrs      18 0.4000000       2
19    6-11yrs      19 0.4000000       2
23    6-11yrs      23 0.4000000       2
26    6-11yrs      26 0.4000000       2
31    6-11yrs      31 0.4000000       2
33    6-11yrs      33 0.4000000       2
34    6-11yrs      34 0.4000000       2
37    6-11yrs      37 0.4000000       2
39    6-11yrs      39 0.4000000       2
40    6-11yrs      40 0.4000000       2
42    6-11yrs      42 0.4000000       2
89    6-11yrs      89 0.4000000       2
90    6-11yrs      90 0.4000000       2
91    6-11yrs      91 0.4000000       2
92    6-11yrs      92 0.4000000       2
93    6-11yrs      93 0.4000000       2
94    6-11yrs      94 0.4000000       2
98    6-11yrs      98 0.4000000       2
99    6-11yrs      99 0.4000000       2
101   6-11yrs     101 0.4000000       2
103   6-11yrs     103 0.4000000       2
105   6-11yrs     105 0.4000000       2
106   6-11yrs     106 0.4000000       2
107   6-11yrs     107 0.4000000       2
113   6-11yrs     113 0.4000000       2
114   6-11yrs     114 0.4000000       2
115   6-11yrs     115 0.4000000       2
121   6-11yrs     121 0.4000000       2
124   6-11yrs     124 0.4000000       2
125   6-11yrs     125 0.4000000       2
171   6-11yrs     171 0.4000000       2
174   6-11yrs     174 0.4000000       2
178   6-11yrs     178 0.4000000       2
182   6-11yrs     182 0.4000000       2
183   6-11yrs     183 0.4000000       2
184   6-11yrs     184 0.4000000       2
190   6-11yrs     190 0.4000000       2
193   6-11yrs     193 0.4000000       2
199   6-11yrs     199 0.4000000       2
201   6-11yrs     201 0.4000000       2
202   6-11yrs     202 0.4000000       2
204   6-11yrs     204 0.4000000       2
208   6-11yrs     208 0.4000000       2
45    12+ yrs      45 0.4051724       3
46    12+ yrs      46 0.4051724       3
47    12+ yrs      47 0.4051724       3
49    12+ yrs      49 0.4051724       3
50    12+ yrs      50 0.4051724       3
56    12+ yrs      56 0.4051724       3
58    12+ yrs      58 0.4051724       3
63    12+ yrs      63 0.4051724       3
64    12+ yrs      64 0.4051724       3
65    12+ yrs      65 0.4051724       3
67    12+ yrs      67 0.4051724       3
72    12+ yrs      72 0.4051724       3
73    12+ yrs      73 0.4051724       3
77    12+ yrs      77 0.4051724       3
81    12+ yrs      81 0.4051724       3
82    12+ yrs      82 0.4051724       3
132   12+ yrs     132 0.4051724       3
133   12+ yrs     133 0.4051724       3
135   12+ yrs     135 0.4051724       3
136   12+ yrs     136 0.4051724       3
141   12+ yrs     141 0.4051724       3
142   12+ yrs     142 0.4051724       3
145   12+ yrs     145 0.4051724       3
147   12+ yrs     147 0.4051724       3
150   12+ yrs     150 0.4051724       3
152   12+ yrs     152 0.4051724       3
153   12+ yrs     153 0.4051724       3
154   12+ yrs     154 0.4051724       3
158   12+ yrs     158 0.4051724       3
159   12+ yrs     159 0.4051724       3
162   12+ yrs     162 0.4051724       3
165   12+ yrs     165 0.4051724       3
210   12+ yrs     210 0.4051724       3
212   12+ yrs     212 0.4051724       3
213   12+ yrs     213 0.4051724       3
215   12+ yrs     215 0.4051724       3
220   12+ yrs     220 0.4051724       3
221   12+ yrs     221 0.4051724       3
223   12+ yrs     223 0.4051724       3
224   12+ yrs     224 0.4051724       3
233   12+ yrs     233 0.4051724       3
236   12+ yrs     236 0.4051724       3
239   12+ yrs     239 0.4051724       3
240   12+ yrs     240 0.4051724       3
242   12+ yrs     242 0.4051724       3
244   12+ yrs     244 0.4051724       3
245   12+ yrs     245 0.4051724       3
> summary(amostra)
   education     ID_unit            Prob           Stratum    
 0-5yrs : 5   Min.   :  2.00   Min.   :0.4000   Min.   :1.00  
 6-11yrs:48   1st Qu.: 63.75   1st Qu.:0.4000   1st Qu.:2.00  
 12+ yrs:47   Median :118.00   Median :0.4052   Median :2.00  
              Mean   :122.22   Mean   :0.4033   Mean   :2.42  
              3rd Qu.:179.00   3rd Qu.:0.4052   3rd Qu.:3.00  
              Max.   :245.00   Max.   :0.4167   Max.   :3.00  
> 
